



<div class="pictures-container">
  <mat-card *ngFor="let pic of pictures()"
            class="clickable-card"
            (click)="goToDetail(pic.id)">
    <mat-card-header>
      <mat-card-title>{{ pic.title }}</mat-card-title>
      <mat-card-subtitle>par {{ pic.author.displayName }}</mat-card-subtitle>
    </mat-card-header>

    <img mat-card-image [src]="pic.image" [alt]="pic.title" />


    <mat-card-content>
      <p>{{ pic.description }}</p>
    </mat-card-content>

    <mat-card-actions>
      <app-like-button 
      [pictureId]="pic.id" 
      [initialCount]="getLikesCount(pic)" 
      [likes]="pic.likes">
    </app-like-button>
    </mat-card-actions>
  </mat-card>
</div>

<mat-card class="upload-card">
  <h3>Ajouter une image</h3>
  <mat-form-field class="full-width">
    <mat-label>Titre</mat-label>
    <input matInput [(ngModel)]="title" name="title" />
  </mat-form-field>

  <mat-form-field class="full-width">
    <mat-label>Description</mat-label>
    <textarea matInput [(ngModel)]="description" name="description"></textarea>
  </mat-form-field>

  <input type="file" (change)="onFileSelected($event)" />

  <button mat-raised-button color="primary" (click)="uploadAndCreatePicture()">
    Upload et Cr√©er
  </button>
</mat-card>

<mat-paginator
  [length]="totalElements"
  [pageSize]="pageSize"
  [pageIndex]="pageIndex"
  [pageSizeOptions]="[5, 10, 20]"
  (page)="onPageChange($event)">
</mat-paginator>
